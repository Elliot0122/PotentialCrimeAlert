!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("perfect-scrollbar"),require("vue")):"function"==typeof define&&define.amd?define(["exports","perfect-scrollbar","vue"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).VuePerfectScrollbar={},e.PerfectScrollbar,e.vue)}(this,(function(e,t,l){"use strict";function r(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var o=r(t);function s(e,t,l){let r=(l||Array.from(e.querySelectorAll(`:scope>${t}`))).filter((e=>{return!!((t=e).offsetWidth||t.offsetHeight||t.getClientRects().length);var t}));return r.length>0?r[r.length-1]:{}}function i(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"ldk";const t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){let t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}));return`${e}-${t}-${+new Date}`}const a={"ps-scroll-y":"onScrollY","ps-scroll-x":"onScrollX","ps-scroll-up":"onScrollUp","ps-scroll-down":"onScrollDown","ps-scroll-left":"onScrollLeft","ps-scroll-right":"onScrollRight","ps-y-reach-start":"onYReachStart","ps-y-reach-end":"onYReachEnd","ps-x-reach-start":"onXReachStart","ps-x-reach-end":"onXReachEnd"},n=":scope>.ps__rail-x",c=":scope>.ps__rail-y",h=`${n}, ${n}>.ps__thumb-x, ${c}, ${c}>.ps__thumb-y`;var d={props:{tagName:{type:String,default:()=>"div"},effectData:{type:[Object,String,Array],default:()=>""},always:Boolean,options:{type:Object,default:()=>{}},wrapName:{type:String,default:()=>"div"},wheelStop:{type:Boolean,default:()=>!0},libTable:Boolean,className:String,height:String,width:String,maxHeight:String,maxWidth:String,isShow:Boolean,triggerScrollClick:{default:()=>!0}},data:()=>({uuid:i("d-scrollbar")}),mounted(){let{table:e,el:t}=this.elTarget();e&&(e.classList.add("perfect-table"),this.mainClass.forEach((t=>t&&e.classList.add(t)))),this.makeScrollbar(t,!!e),Object.keys(a).forEach((e=>t.addEventListener(e,(t=>this.$emit(a[e],t))))),window.addEventListener("resize",this.scrollbarUpdate)},destroyed(){let{element:e}=this.scrollbar;Object.keys(a).forEach((t=>e.removeEventListener(t,(e=>this.$emit(a[t],e))))),window.removeEventListener("resize",this.scrollbarUpdate),this.scrollbar&&(this.scrollbar.destroy(),this.scrollbar=null)},watch:{effectData:{deep:!0,handler(e){this.$nextTick((()=>{!function(e){return null==e||("string"==typeof e?""===e.trim():Array.isArray(e)?0===e.length:"object"==typeof e&&0===Object.keys(e).length)}(e)?this.scrollbarUpdate():this.scrollToTop()}))}},isShow(){this.scrollbar&&this.scrollbar.update()}},computed:{tag(){return`${this.tagName}`.trim().toLowerCase()},forTbody(){return"tbody"===this.tag},forDataList(){return"dl"===this.tag||"ol"===this.tag||"ul"===this.tag},mainClass(){return["list-d-scroll-view",this.className,this.always?"scroll-always":""].filter((e=>e))},classOther(){return[...this.mainClass,"perfect-list"]},dimensionStyle(){return(e=>{let{height:t,maxHeight:l,width:r,maxWidth:o}=e,s={};return(t||l)&&(s.height=t||"auto",s["max-height"]=l||"auto"),r&&(s.width=r||"auto"),o&&(s["max-width"]=o||"auto"),s})(this)}},methods:{makeScrollbar(e,t){let l={...this.options};(l.suppressScrollX||t)&&(l.suppressScrollX=!0),l.wheelPropagation=l.wheelPropagation||this.wheelStop,this.scrollbar=new o.default(e,l),this.listElScroll=Array.from(e.querySelectorAll(h)),this.triggerScrollClick&&this.listElScroll.forEach((e=>{e.addEventListener("click",(e=>{e.preventDefault(),e.stopPropagation()}))})),0!==e.clientHeight&&0!==e.clientWidth||setTimeout((()=>this.scrollbar.update()),320)},elTarget(){if(this.forTbody)return{table:this.$el.parentElement,el:this.$el};if(this.$refs.child){if(this.libTable){let e=this.$refs.child.querySelector("table"),t=e?e.querySelector("tbody"):null;if(t)return Object.keys(this.dimensionStyle).forEach((e=>{t.style[e]=this.dimensionStyle[e]})),{table:e,el:e.querySelector("tbody")}}return{el:this.$refs.child}}return{el:this.$el}},handeFocus(){if(!this.isMouseActivated&&this.scrollbar){this.isMouseActivated=!0;let{classList:e}=this.scrollbar.element;if(e.contains("ps--active-y")||e.contains("ps--active-x"))return;this.scrollbar.update()}},scrollToTop(){this.scrollbar.element.scrollTop=0,this.scrollbar.update()},scrollbarUpdate(){this.$nextTick((()=>{let{element:e}=this.scrollbar,{children:t,scrollTop:l,scrollHeight:r,clientHeight:o}=e;if(o>=r)return void this.scrollToTop();let i=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return e.length<=0?0:Array.from(e).filter((e=>!t.includes(e)))}(t,this.listElScroll);if(i.length<=0)return void this.scrollToTop();let a=s(e,":not(.ps__rail-x):not(.ps__rail-y)",i);if(a){let t=s(e,"div.ps__rail-y").clientHeight,{top:o}=function(e){if(!e.getClientRects().length)return{top:0,left:0};let t=e.getBoundingClientRect(),l=e.ownerDocument.defaultView;return{top:t.top+l.pageYOffset,left:t.left+l.pageXOffset}}(a);if(void 0!==t&&o+a.clientHeight<t){let e=t<r?r:t;(function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).reduce(((e,t)=>e+t.clientHeight||0),0)})(i)+l<e&&a.scrollIntoView({block:"start",behavior:"smooth"})}}this.scrollbar.update()}))}}};d.render=function(e,t,r,o,s,i){return i.forTbody?(l.openBlock(),l.createBlock(l.resolveDynamicComponent(r.tagName),{key:0,id:s.uuid,style:l.normalizeStyle(i.dimensionStyle),onMouseenter:i.handeFocus},{default:l.withCtx((()=>[l.renderSlot(e.$slots,"default")])),_:3},8,["id","style","onMouseenter"])):(l.openBlock(),l.createBlock(l.resolveDynamicComponent(r.tagName),{key:1,id:s.uuid,class:l.normalizeClass(i.classOther),style:l.normalizeStyle(r.libTable?{}:i.dimensionStyle),onMouseenter:i.handeFocus},{default:l.withCtx((()=>[i.forDataList?l.renderSlot(e.$slots,"default",{key:0}):(l.openBlock(),l.createBlock(l.resolveDynamicComponent(r.wrapName),{key:1,ref:"child",class:"scroll-content"},{default:l.withCtx((()=>[l.renderSlot(e.$slots,"default")])),_:3},512))])),_:3},8,["id","class","style","onMouseenter"]))};var u=Object.freeze({__proto__:null,Scrollbar:d});e.Scrollbar=d,e.default=function(e){Object.entries(u).forEach((t=>{let[l,r]=t;e.component(l,r)}))},Object.defineProperty(e,"__esModule",{value:!0})}));
